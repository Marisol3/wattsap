<!DOCTYPE html>
<html lang="en">
	<head>
	  	<meta charset="utf-8">
	  	<title>Whatsapp Web</title>
	  	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	  	<meta name="viewport" content="width=device-width, initial-scale=1">
	  	<link rel="shortcut icon" href="image/favicon.png" type="image/png">
	  	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,600%7CRoboto:300,400,500" media="all">
	  	<script src="https://code.jquery.com/jquery-1.11.1.js"></script>
		<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>

		<style>
		#bienvenida
		{
			border: 1px solid #CCC;
			margin: 10px;
		}
		#chat
		{
			margin: 10px;
			border: 1px solid #CCC;
			display: none;
		}
	    </style>

	</head>
	<body>
		<div id=bienvenida>
			<h3>Hola!!</h3>
			<input type=text id="usuario" ></input>
			<button onclick=getuser()>Entra</button>
		</div>
		<div id=chat>
			<input type="text" id="mensaje"></input>
			<button onclick=enviarmensaje()>Enviar</button>
			<button onclick=limpaiarmensajes()>Limpiar</button>
		<ul id="lista_mensajes"></ul>
		</div>

		<script>
			var user;
			var socket=io('/');
		function getuser(){
			user=$('#usuario').val();
			$('#bienvenida').hide();
			$('#chat').show();
		}	
		function enviarmensaje()
		{
			socket.emit('chat' , '<span>' + user + '</span> :'  + $('#mensaje').val());
			$('#mensaje').val('');
			$('#mensaje').focus();
		}
		function limpaiarmensajes()
		{
			$('#lista_mensajes').html('');
		}
		socket.on('nuevo_mensaje', function(_msg)
		{
			$('#lista_mensajes').append('<li>' + _msg + '</li>'); 
		});
		</script>
	</body>
</html>